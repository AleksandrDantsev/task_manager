<script setup>
import { computed, ref } from "vue";
import ProjectListActionUnit from "./ProjectListActionUnit.vue"
import { useStore } from "vuex";

    const store = useStore();
    const isLocked = ref(true);

    const props = defineProps({
        isClosedSideBar: String,
        name: String,
        openEditLine: Function,
        isAlreadyCopied: Boolean,
    });

    const isOpenBar = computed(() => Boolean(props.isClosedSideBar));

    const copyProject = (e) => {
        if (e.target.id === "pr-action-Copy") {
            store.commit("copyProject", props.name);
        }
    } 

    const changeNameProject = (e) => {
        if (e.target.id === "pr-action-Rename") {
            props.openEditLine();
        }
    }

    const deleteProject = (e) => {
        if (!isLocked.value && e.target.id === "pr-action-Delete") {
            store.commit("deleteProject", props.name);
        }
        isLocked.value = false;
    }

</script>

<template>
    <ul class="list-actions-project">
            <ProjectListActionUnit v-if="!isAlreadyCopied" :name="'Copy'" :isOpenBar="isOpenBar" @click-pr-action="(e) => copyProject(e)">
                <svg data-v-69013cdb="" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="dropdown-item__icon v-icon-colored__svg" style="fill: #b3b3b3; height: 16px; width: 16px;"><path opacity="0.39" d="M14.5 5.1001L17.9 8.5C18 8.6 18 8.7999 17.9 8.8999C17.8 8.9999 17.8 9 17.7 9H14.3C14.1 9 14 8.89995 14 8.69995V5.30005C14 5.10005 14.1 5 14.3 5C14.4 5 14.4 5.0001 14.5 5.1001Z" fill="#b3b3b3"></path><path d="M18 19C18 20.7 16.7 22 15 22H6C4.3 22 3 20.7 3 19V8C3 6.3 4.3 5 6 5C6 3.3 7.3 2 9 2H14.9C15.7 2 16.5 2.2999 17.1 2.8999L20.2 6.1001C20.7 6.7001 21 7.39995 21 8.19995V16C21 17.7 19.7 19 18 19ZM16 19H9C7.3 19 6 17.7 6 16V7C5.4 7 5 7.4 5 8V19C5 19.6 5.4 20 6 20H15C15.6 20 16 19.6 16 19ZM9 4C8.4 4 8 4.4 8 5V16C8 16.6 8.4 17 9 17H18C18.6 17 19 16.6 19 16V8.19995C19 7.89995 18.9 7.7 18.7 7.5L15.6 4.30005C15.4 4.10005 15.2 4 14.9 4H9ZM10 11H17C17.6 11 18 11.4 18 12C18 12.6 17.6 13 17 13H10C9.4 13 9 12.6 9 12C9 11.4 9.4 11 10 11ZM10 14H17C17.6 14 18 14.4 18 15C18 15.6 17.6 16 17 16H10C9.4 16 9 15.6 9 15C9 14.4 9.4 14 10 14Z" fill="#b3b3b3"></path></svg>
            </ProjectListActionUnit>
            <ProjectListActionUnit :name="'Rename'" :isOpenBar="isOpenBar" @click-pr-action="(e) => changeNameProject(e)">
                <svg data-v-69013cdb="" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="dropdown-item__icon v-icon-colored__svg" style="fill: #b3b3b3; height: 16px; width: 16px;"><path opacity="0.39" fill-rule="evenodd" clip-rule="evenodd" d="M19.1139 2.10953L21.8905 4.88613C22.0365 5.03217 22.0365 5.26896 21.8905 5.415L21.0971 6.20831C20.9511 6.35436 20.7143 6.35436 20.5683 6.20831L17.7917 3.43172C17.6456 3.28568 17.6456 3.04889 17.7917 2.90285L18.585 2.10953C18.731 1.96349 18.9678 1.96349 19.1139 2.10953Z" fill="#b3b3b3"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M19.775 6.73725L17.2628 4.22509C17.0437 4.00603 16.6886 4.00603 16.4695 4.22509L8.41552 12.279C8.32273 12.3718 8.2654 12.4942 8.25352 12.6249L8.0023 15.3883C7.97129 15.7294 8.2676 16.029 8.61175 15.9977L11.3751 15.7465C11.5058 15.7346 11.6282 15.6773 11.721 15.5845L19.775 7.53056C19.994 7.31149 19.994 6.95631 19.775 6.73725ZM10.7818 13.8793L17.395 7.26603C17.468 7.19301 17.468 7.07462 17.395 7.00159L16.9984 6.60494C16.9253 6.53192 16.8069 6.53192 16.7339 6.60494L10.1207 13.2182C10.0027 13.3362 10.0408 13.6185 10.027 13.7698C10.0176 13.8726 10.0934 13.9636 10.1963 13.9729C10.3442 13.9864 10.6643 13.9968 10.7818 13.8793Z" fill="#b3b3b3"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M8.7587 4L11 4C11.5523 4 12 4.44772 12 5C12 5.55229 11.5523 6 11 6H8.8C7.94342 6 7.36113 6.00078 6.91104 6.03755C6.47262 6.07337 6.24842 6.1383 6.09202 6.21799C5.7157 6.40973 5.40973 6.7157 5.21799 7.09202C5.1383 7.24842 5.07337 7.47262 5.03755 7.91104C5.00078 8.36113 5 8.94342 5 9.8V15.2C5 16.0566 5.00078 16.6389 5.03755 17.089C5.07337 17.5274 5.1383 17.7516 5.21799 17.908C5.40973 18.2843 5.7157 18.5903 6.09202 18.782C6.24842 18.8617 6.47262 18.9266 6.91104 18.9624C7.36113 18.9992 7.94342 19 8.8 19H14.2C15.0566 19 15.6389 18.9992 16.089 18.9624C16.5274 18.9266 16.7516 18.8617 16.908 18.782C17.2843 18.5903 17.5903 18.2843 17.782 17.908C17.8617 17.7516 17.9266 17.5274 17.9624 17.089C17.9992 16.6389 18 16.0566 18 15.2V13C18 12.4477 18.4477 12 19 12C19.5523 12 20 12.4477 20 13V15.2413C20 16.0463 20 16.7106 19.9558 17.2518C19.9099 17.8139 19.8113 18.3306 19.564 18.816C19.1805 19.5686 18.5686 20.1805 17.816 20.564C17.3306 20.8113 16.8139 20.9099 16.2518 20.9558C15.7106 21 15.0463 21 14.2413 21H8.75868C7.95372 21 7.28936 21 6.74817 20.9558C6.18608 20.9099 5.66937 20.8113 5.18404 20.564C4.43139 20.1805 3.81947 19.5686 3.43597 18.816C3.18868 18.3306 3.09012 17.8139 3.04419 17.2518C2.99998 16.7106 2.99999 16.0463 3 15.2413V9.7587C2.99999 8.95373 2.99998 8.28937 3.04419 7.74817C3.09012 7.18608 3.18868 6.66937 3.43597 6.18404C3.81947 5.43139 4.43139 4.81947 5.18404 4.43597C5.66937 4.18868 6.18608 4.09012 6.74817 4.04419C7.28937 3.99998 7.95373 3.99999 8.7587 4Z" fill="#b3b3b3"></path></svg>
            </ProjectListActionUnit>
            <ProjectListActionUnit :name="'Delete'" :isOpenBar="isOpenBar" @click-pr-action="(e) => deleteProject(e)">
                <svg v-if="isLocked" data-v-792b3c77="" data-v-d7e04b56="" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg" class="simple" style="height: 16px; width: 16px; fill: #c40f0f; #c40f0f;"><path opacity="0.39" d="M12 17.5C10.9 17.5 10 16.6 10 15.5C10 14.4 10.9 13.5 12 13.5C13.1 13.5 14 14.4 14 15.5C14 16.6 13.1 17.5 12 17.5Z" fill="#c40f0f"></path><path d="M16 9V8C16 5.8 14.2 4 12 4C10.7 4 9.49999 4.6001 8.79999 5.6001C8.59999 5.8001 8.49999 6.0999 8.29999 6.3999C8.09999 6.8999 7.5 7.0999 7 6.8999C6.5 6.6999 6.3 6.1001 6.5 5.6001C6.7 5.2001 6.90001 4.7999 7.20001 4.3999C8.30001 2.8999 10.1 2 12 2C15.3 2 18 4.7 18 8V9H19C19.6 9 20 9.4 20 10V20C20 21.1 19.1 22 18 22H6C4.9 22 4 21.1 4 20V10C4 9.4 4.4 9 5 9H16V9ZM18 11H6V20H18V11Z" fill="#c40f0f"></path></svg>
                <svg v-else data-v-69013cdb="" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="dropdown-item__icon v-icon-colored__svg" style="fill: #b3b3b3; height: 16px; width: 16px;"><path opacity="0.39" d="M10.6 11.3C10.2 10.9 9.6 10.9 9.3 11.3C8.9 11.7 8.9 12.3 9.3 12.6L10.7 14L9.3 15.4C8.9 15.8 8.9 16.4 9.3 16.7C9.7 17.1 10.3 17.1 10.6 16.7L12 15.3L13.4 16.7C13.8 17.1 14.4 17.1 14.7 16.7C15.1 16.3 15.1 15.7 14.7 15.4L13.3 14L14.7 12.6C15.1 12.2 15.1 11.6 14.7 11.3C14.3 10.9 13.7 10.9 13.4 11.3L12 12.7L10.6 11.3Z" fill="#b3b3b3"></path><path d="M7 2.59998C7 2.29998 7.30001 2 7.60001 2H16.4C16.7 2 17 2.29998 17 2.59998C17 2.79998 17.2 3 17.4 3H19C19.6 3 20 3.4 20 4C20 4.6 19.6 5 19 5H5C4.4 5 4 4.6 4 4C4 3.4 4.4 3 5 3H6.60001C6.80001 3 7 2.79998 7 2.59998Z" fill="#b3b3b3"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M7.5681 6C7.57872 6 7.58936 6 7.6 6L16.4319 6C16.6843 5.99997 16.9301 5.99994 17.1382 6.01695C17.3668 6.03562 17.6366 6.07969 17.908 6.21799C18.2843 6.40973 18.5903 6.71569 18.782 7.09202C18.9203 7.36344 18.9644 7.63318 18.9831 7.86177C19.0001 8.06993 19 8.31573 19 8.56812L19 16.2413C19 17.0463 19 17.7106 18.9558 18.2518C18.9099 18.8139 18.8113 19.3306 18.564 19.816C18.1805 20.5686 17.5686 21.1805 16.816 21.564C16.3306 21.8113 15.8139 21.9099 15.2518 21.9558C14.7106 22 14.0463 22 13.2413 22H10.7587C9.95374 22 9.28937 22 8.74817 21.9558C8.18608 21.9099 7.66937 21.8113 7.18404 21.564C6.43139 21.1805 5.81947 20.5686 5.43597 19.816C5.18868 19.3306 5.09012 18.8139 5.04419 18.2518C4.99998 17.7106 4.99999 17.0463 5 16.2413L5 8.6C5 8.58936 5 8.57872 5 8.5681C4.99997 8.31572 4.99994 8.06993 5.01695 7.86177C5.03562 7.63318 5.07969 7.36344 5.21799 7.09202C5.40973 6.71569 5.71569 6.40973 6.09202 6.21799C6.36344 6.07969 6.63318 6.03562 6.86177 6.01695C7.06993 5.99994 7.31572 5.99997 7.5681 6ZM7 8.6V16.2C7 17.0566 7.00078 17.6389 7.03755 18.089C7.07337 18.5274 7.1383 18.7516 7.21799 18.908C7.40973 19.2843 7.71569 19.5903 8.09202 19.782C8.24842 19.8617 8.47262 19.9266 8.91104 19.9624C9.36113 19.9992 9.94342 20 10.8 20H13.2C14.0566 20 14.6389 19.9992 15.089 19.9624C15.5274 19.9266 15.7516 19.8617 15.908 19.782C16.2843 19.5903 16.5903 19.2843 16.782 18.908C16.8617 18.7516 16.9266 18.5274 16.9624 18.089C16.9992 17.6389 17 17.0566 17 16.2V8.6C17 8.00047 17.0135 8 16.4 8H7.6C6.98666 8 7 8.00117 7 8.6Z" fill="#b3b3b3"></path></svg>
            </ProjectListActionUnit>
    </ul>
</template>

<style lang="scss" scoped>
    .list-actions-project {
        width: 100%;
        height: 100%;
        padding: 10px;
        li {
            display: flex;
            align-items: center;
            padding: 6px 10px;
            border-radius: 4px;
            &:hover {
                background-color: #f5f5f5;
            }
        }
    }
</style>